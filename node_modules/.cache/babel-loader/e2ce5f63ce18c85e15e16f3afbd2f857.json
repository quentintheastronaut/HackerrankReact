{"ast":null,"code":"function _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n} // https://w3c.github.io/html-aria/#document-conformance-requirements-for-use-of-aria-attributes-in-html\n\n\nimport { getLocalName } from \"./util.mjs\";\nexport default function getRole(element) {\n  var explicitRole = getExplicitRole(element);\n\n  if (explicitRole !== null) {\n    return explicitRole;\n  }\n\n  return getImplicitRole(element);\n}\nvar localNameToRoleMappings = {\n  article: \"article\",\n  aside: \"complementary\",\n  body: \"document\",\n  button: \"button\",\n  datalist: \"listbox\",\n  dd: \"definition\",\n  details: \"group\",\n  dialog: \"dialog\",\n  dt: \"term\",\n  fieldset: \"group\",\n  figure: \"figure\",\n  // WARNING: Only with an accessible name\n  form: \"form\",\n  footer: \"contentinfo\",\n  h1: \"heading\",\n  h2: \"heading\",\n  h3: \"heading\",\n  h4: \"heading\",\n  h5: \"heading\",\n  h6: \"heading\",\n  header: \"banner\",\n  hr: \"separator\",\n  legend: \"legend\",\n  li: \"listitem\",\n  math: \"math\",\n  main: \"main\",\n  menu: \"list\",\n  nav: \"navigation\",\n  ol: \"list\",\n  optgroup: \"group\",\n  // WARNING: Only in certain context\n  option: \"option\",\n  output: \"status\",\n  progress: \"progressbar\",\n  // WARNING: Only with an accessible name\n  section: \"region\",\n  summary: \"button\",\n  table: \"table\",\n  tbody: \"rowgroup\",\n  textarea: \"textbox\",\n  tfoot: \"rowgroup\",\n  // WARNING: Only in certain context\n  td: \"cell\",\n  th: \"columnheader\",\n  thead: \"rowgroup\",\n  tr: \"row\",\n  ul: \"list\"\n};\n\nfunction getImplicitRole(element) {\n  var mappedByTag = localNameToRoleMappings[getLocalName(element)];\n\n  if (mappedByTag !== undefined) {\n    return mappedByTag;\n  }\n\n  switch (getLocalName(element)) {\n    case \"a\":\n    case \"area\":\n    case \"link\":\n      if (element.hasAttribute(\"href\")) {\n        return \"link\";\n      }\n\n      break;\n\n    case \"img\":\n      if ((element.getAttribute(\"alt\") || \"\").length > 0) {\n        return \"img\";\n      }\n\n      break;\n\n    case \"input\":\n      {\n        var _ref = element,\n            type = _ref.type;\n\n        switch (type) {\n          case \"button\":\n          case \"image\":\n          case \"reset\":\n          case \"submit\":\n            return \"button\";\n\n          case \"checkbox\":\n          case \"radio\":\n            return type;\n\n          case \"range\":\n            return \"slider\";\n\n          case \"email\":\n          case \"tel\":\n          case \"text\":\n          case \"url\":\n            if (element.hasAttribute(\"list\")) {\n              return \"combobox\";\n            }\n\n            return \"textbox\";\n\n          case \"search\":\n            if (element.hasAttribute(\"list\")) {\n              return \"combobox\";\n            }\n\n            return \"searchbox\";\n\n          default:\n            return null;\n        }\n      }\n\n    case \"select\":\n      if (element.hasAttribute(\"multiple\") || element.size > 1) {\n        return \"listbox\";\n      }\n\n      return \"combobox\";\n  }\n\n  return null;\n}\n\nfunction getExplicitRole(element) {\n  if (element.hasAttribute(\"role\")) {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- safe due to hasAttribute check\n    var _trim$split = element.getAttribute(\"role\").trim().split(\" \"),\n        _trim$split2 = _slicedToArray(_trim$split, 1),\n        explicitRole = _trim$split2[0];\n\n    if (explicitRole !== undefined && explicitRole.length > 0) {\n      return explicitRole;\n    }\n  }\n\n  return null;\n}","map":{"version":3,"sources":["../sources/getRole.ts"],"names":["explicitRole","getExplicitRole","getImplicitRole","localNameToRoleMappings","article","aside","body","button","datalist","dd","details","dialog","dt","fieldset","figure","form","footer","h1","h2","h3","h4","h5","h6","header","hr","legend","li","math","main","menu","nav","ol","optgroup","option","output","progress","section","summary","table","tbody","textarea","tfoot","td","th","thead","tr","ul","mappedByTag","getLocalName","element","type"],"mappings":"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","sourcesContent":["// https://w3c.github.io/html-aria/#document-conformance-requirements-for-use-of-aria-attributes-in-html\n\nimport { getLocalName } from \"./util\";\n\nexport default function getRole(element: Element): string | null {\n\tconst explicitRole = getExplicitRole(element);\n\tif (explicitRole !== null) {\n\t\treturn explicitRole;\n\t}\n\n\treturn getImplicitRole(element);\n}\n\nconst localNameToRoleMappings: Record<string, string | undefined> = {\n\tarticle: \"article\",\n\taside: \"complementary\",\n\tbody: \"document\",\n\tbutton: \"button\",\n\tdatalist: \"listbox\",\n\tdd: \"definition\",\n\tdetails: \"group\",\n\tdialog: \"dialog\",\n\tdt: \"term\",\n\tfieldset: \"group\",\n\tfigure: \"figure\",\n\t// WARNING: Only with an accessible name\n\tform: \"form\",\n\tfooter: \"contentinfo\",\n\th1: \"heading\",\n\th2: \"heading\",\n\th3: \"heading\",\n\th4: \"heading\",\n\th5: \"heading\",\n\th6: \"heading\",\n\theader: \"banner\",\n\thr: \"separator\",\n\tlegend: \"legend\",\n\tli: \"listitem\",\n\tmath: \"math\",\n\tmain: \"main\",\n\tmenu: \"list\",\n\tnav: \"navigation\",\n\tol: \"list\",\n\toptgroup: \"group\",\n\t// WARNING: Only in certain context\n\toption: \"option\",\n\toutput: \"status\",\n\tprogress: \"progressbar\",\n\t// WARNING: Only with an accessible name\n\tsection: \"region\",\n\tsummary: \"button\",\n\ttable: \"table\",\n\ttbody: \"rowgroup\",\n\ttextarea: \"textbox\",\n\ttfoot: \"rowgroup\",\n\t// WARNING: Only in certain context\n\ttd: \"cell\",\n\tth: \"columnheader\",\n\tthead: \"rowgroup\",\n\ttr: \"row\",\n\tul: \"list\",\n};\n\nfunction getImplicitRole(element: Element): string | null {\n\tconst mappedByTag = localNameToRoleMappings[getLocalName(element)];\n\tif (mappedByTag !== undefined) {\n\t\treturn mappedByTag;\n\t}\n\n\tswitch (getLocalName(element)) {\n\t\tcase \"a\":\n\t\tcase \"area\":\n\t\tcase \"link\":\n\t\t\tif (element.hasAttribute(\"href\")) {\n\t\t\t\treturn \"link\";\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"img\":\n\t\t\tif ((element.getAttribute(\"alt\") || \"\").length > 0) {\n\t\t\t\treturn \"img\";\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"input\": {\n\t\t\tconst { type } = element as HTMLInputElement;\n\t\t\tswitch (type) {\n\t\t\t\tcase \"button\":\n\t\t\t\tcase \"image\":\n\t\t\t\tcase \"reset\":\n\t\t\t\tcase \"submit\":\n\t\t\t\t\treturn \"button\";\n\t\t\t\tcase \"checkbox\":\n\t\t\t\tcase \"radio\":\n\t\t\t\t\treturn type;\n\t\t\t\tcase \"range\":\n\t\t\t\t\treturn \"slider\";\n\t\t\t\tcase \"email\":\n\t\t\t\tcase \"tel\":\n\t\t\t\tcase \"text\":\n\t\t\t\tcase \"url\":\n\t\t\t\t\tif (element.hasAttribute(\"list\")) {\n\t\t\t\t\t\treturn \"combobox\";\n\t\t\t\t\t}\n\t\t\t\t\treturn \"textbox\";\n\n\t\t\t\tcase \"search\":\n\t\t\t\t\tif (element.hasAttribute(\"list\")) {\n\t\t\t\t\t\treturn \"combobox\";\n\t\t\t\t\t}\n\t\t\t\t\treturn \"searchbox\";\n\t\t\t\tdefault:\n\t\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\tcase \"select\":\n\t\t\tif (\n\t\t\t\telement.hasAttribute(\"multiple\") ||\n\t\t\t\t(element as HTMLSelectElement).size > 1\n\t\t\t) {\n\t\t\t\treturn \"listbox\";\n\t\t\t}\n\t\t\treturn \"combobox\";\n\t}\n\treturn null;\n}\n\nfunction getExplicitRole(element: Element): string | null {\n\tif (element.hasAttribute(\"role\")) {\n\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- safe due to hasAttribute check\n\t\tconst [explicitRole] = element.getAttribute(\"role\")!.trim().split(\" \");\n\t\tif (explicitRole !== undefined && explicitRole.length > 0) {\n\t\t\treturn explicitRole;\n\t\t}\n\t}\n\n\treturn null;\n}\n"]},"metadata":{},"sourceType":"module"}